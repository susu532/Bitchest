var Woffice_Credit_System={init:function(t){"use strict";var e=this;e.$=void 0===t?jQuery:t,e.$(window).load(function(){e.Events.watch(),e.Handler.watch(),e.Todos_Actions.watch()}),e.Events.watch(),e.Handler.watch()},Events:{watch:function(){var t=Woffice_Credit_System.$,e=t("body");e.find("#post_title").after(WOCS_AI.button_content),t(".calendar-event-new-btn").on("click",function(){e.find("#woffice-event-form .form-row:first-child .form-group").append(WOCS_AI.button_content)})}},Handler:{watch:function(){var t,e=this,i=Woffice_Credit_System.$,a=i("body");a.on("click",".woffice-ai-action, .woffice-ai-regeneration",function(){title=(t=i(this).siblings('input[type="text"]')).val(),t.addClass("wocs_ai_accessor");var o=i(this).data("type"),n="";if(("project_content"==o||"blog_content"==o||"blog_image"==o)&&""==(n=i("#post_title").val())||(i(a).find("#aimodal .woffice-ai-regeneration").text("Regenrate "+o.replace("_"," ")),""==title)){alert("Title must be required for AI");return}void 0==title&&(title=i(".woffice-ai-action").siblings('input[type="text"]').val()),i(".woffice-ai-regeneration").attr("data-type",o),i.ajax({type:"POST",url:Woffice.data.ajax_url.toString(),data:{action:"woffice_ai_request",title:title,nonce:WOFFICE.nonce,rq_type:o},beforeSend:function(){i("#aimodal .ai-spinner").show(),i("#aimodal").modal("show"),o=o.replace("_"," "),i(".modal-footer a.woffice-ai-regeneration").text("Regenrate "+o),i("#aimodal .ai-listoutput, #aimodal .modal-title-resultfor, #aimodal .ai-avail-credit").html(" "),i("#aimodal .ai-avail-credit-wrapper").hide()},success:function(t){var a=JSON.parse(t);i("#aimodal .ai-listoutput").html(" "),i("#aimodal .ai-spinner").hide(),i("#aimodal .modal-title-resultfor").text(title),i("#aimodal .ai-listoutput").html(a.output),e.image_zoom(),i("#aimodal .ai-avail-credit").html(a.credit),i("#aimodal .ai-avail-credit-wrapper").show(),e.toogle_content()}})}),a.on("click",".wpcs_copier",function(){item_Val=i(this).parent("span").siblings(".wocs_ai_title").text(),a.find(".wocs_ai_accessor").val(item_Val)}),a.on("click",".wpcs_content_copier",function(){item_Val=i(this).siblings("span").html(),i("#wp-post_content-wrap").hasClass("tmce-active"),tinymce.get("post_content").execCommand("mceInsertContent",!0,item_Val)}),a.on("click",".wpcs_image_copier",function(){var t=i(this).parent("span").siblings(".wocs_ai_image").attr("src");i("#woffice_ai_select_img").val(t),i("#primary-post-form .woimg_preview").html(""),i("#primary-post-form .woimg_preview").html('<img class="ai_selected_preview" width="100" height="100" src="'+t+'">'),i("#aimodal").modal("hide")})},toogle_content:function(){var t=Woffice_Credit_System.$;t(".wocs_ai_content p:nth-of-type(1n+4)").hide(),t(".btn-more").on("click",function(){t(this).css("visibility","hidden"),t(this).siblings(".wocs_ai_content").find("p:gt(2)").toggle()})},image_zoom:function(){(0,Woffice_Credit_System.$)("body"),jQuery(".wocs_ai_image").length>0&&jQuery(".wocs_ai_image").hoverpulse({size:200,speed:200})}},Todos_Actions:{watch:function(){if("undefined"!=typeof WOFFICE_TODOS){var t=Woffice_Credit_System.$,e=t("body");e.on("click","#selectll_ai_todos",function(){t(".wocs_ai_list input:checkbox").prop("checked",t(this).prop("checked"))}),e.on("click",".ai_add_todos",function(){var e=t(".ai_todos_form").serialize();t.ajax({type:"POST",url:Woffice.data.ajax_url.toString(),data:{action:"woffice_ai_add_todos",_wpnonce:WOFFICE_TODOS.nonce,id:WOCS_AI.project_id,type:"project",todos:e},beforeSend:function(){},success:function(e){var i=JSON.parse(e);t(".ai-message-wrapper .alert").text(i.message),i.status?(t(".ai-message-wrapper").addClass("d-block"),t(".ai-message-wrapper .alert").addClass("alert-success")):(t(".ai-message-wrapper").addClass("d-block"),t(".ai-message-wrapper .alert").addClass("alert-danger"))}})})}}}};Woffice_Credit_System.init(jQuery);