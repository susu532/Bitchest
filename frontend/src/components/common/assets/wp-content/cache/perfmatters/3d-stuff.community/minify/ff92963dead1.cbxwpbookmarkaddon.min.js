(function($){'use strict';$(document).ready(function(){var ajaxurl=cbxwpbookmark.ajaxurl;var awn_options={labels:{tip:cbxwpbookmark.awn_options.tip,info:cbxwpbookmark.awn_options.info,success:cbxwpbookmark.awn_options.success,warning:cbxwpbookmark.awn_options.warning,alert:cbxwpbookmark.awn_options.alert,async:cbxwpbookmark.awn_options.async,confirm:cbxwpbookmark.awn_options.confirm,confirmOk:cbxwpbookmark.awn_options.confirmOk,confirmCancel:cbxwpbookmark.awn_options.confirmCancel}};$('.cbxbookmark_card_wrap').on('click','.cbxbookmark-post-delete',function(event){event.preventDefault();var $this=$(this);var $wrapper=$this.closest('div.cbxbookmark_card_wrap');var $bookmark_id=$this.data('bookmark_id');var $object_id=$this.data('object_id');var $object_type=$this.data('object_type');var $busy=parseInt($this.data('busy'));var data={'action':'cbx_delete_bookmark_post','security':cbxwpbookmark.nonce,'object_id':$object_id,'object_type':$object_type,'bookmark_id':$bookmark_id};if($busy===0){var notifier=new AWN(awn_options);var onCancel=()=>{};var onOk=()=>{$this.data('busy',1);$this.addClass('running');$.post(ajaxurl,data,function(response){response=$.parseJSON(response);if(response.msg===0){$this.closest('div.cbxbookmark_card_col').hide('slow',function(){$(this).remove()});if($wrapper.find('div.cbxbookmark_card').length===0){$wrapper.append('<div class="cbxbookmark-alert cbxbookmark-alert-error">'+cbxwpbookmark.bookmark_removed_empty+'</div>')}else{new AWN(awn_options).success(cbxwpbookmark.bookmark_removed)}}else if(response.msg===1){new AWN(awn_options).warning(cbxwpbookmark.bookmark_removed_failed);$this.removeClass('running')}})};notifier.confirm(cbxwpbookmark.are_you_sure_delete_desc,onOk,onCancel,{labels:{confirm:cbxwpbookmark.are_you_sure_global}})}});$('.cbxbookmark_cards_wrapper_postgrid').on('click','.cbxbookmark-more',function(e){e.preventDefault();var _this=$(this);var $busy=Number(_this.data('busy'));if($busy===1)return;var $wrapper_parent=_this.closest('div.cbxbookmark_cards_wrapper');var $wrapper=$wrapper_parent.find('.cbxbookmark_card_wrap');var limit=_this.data('limit');var offset=_this.data('offset');var catid=_this.data('catid');var type=_this.data('type');var order=_this.data('order');var orderby=_this.data('orderby');var userid=_this.data('userid');var totalpage=_this.data('totalpage');var currpage=_this.data('currpage');var allowdelete=_this.data('allowdelete');var show_thumb=_this.data('show_thumb');if(currpage+1>=totalpage){_this.hide()}else{_this.show()}
var addcat={'action':'cbx_bookmark_postgrid_loadmore','security':cbxwpbookmark.nonce,'limit':limit,'offset':offset,'catid':catid,'type':type,'order':order,'orderby':orderby,'userid':userid,'allowdelete':allowdelete,'show_thumb':show_thumb};_this.data('busy',1);_this.addClass('running');$.post(ajaxurl,addcat,function(response){response=$.parseJSON(response);if(response.code){_this.data('offset',limit+offset);_this.data('currpage',currpage+1);$wrapper.append(response.data)}else{new AWN(awn_options).warning(cbxwpbookmark.error_msg+response.code)}
_this.data('busy',0);_this.removeClass('running')})});$('.cbxbookmark_cards_wrapper_mostgrid').on('click','.cbxbookmark-more',function(e){e.preventDefault();var _this=$(this);var $busy=Number(_this.data('busy'));if($busy===1)return;var $wrapper=_this.closest('div.cbxbookmark_cards_wrapper').find('.cbxbookmark_card_wrap');var limit=_this.data('limit');var offset=_this.data('offset');var type=_this.data('type');var order=_this.data('order');var orderby=_this.data('orderby');var totalpage=_this.data('totalpage');var currpage=_this.data('currpage');var show_thumb=_this.data('show_thumb');if(currpage+1>=totalpage){_this.hide()}else{_this.show()}
var addcat={'action':'cbx_bookmark_mostgrid_loadmore','security':cbxwpbookmark.nonce,'limit':limit,'offset':offset,'type':type,'order':order,'orderby':orderby,'show_thumb':show_thumb};_this.data('busy',1);_this.addClass('running');$.post(ajaxurl,addcat,function(response){response=$.parseJSON(response);if(response.code){_this.data('offset',limit+offset);_this.data('currpage',currpage+1);$wrapper.append(response.data)}else{new AWN(awn_options).warning(cbxwpbookmark.error_msg+response.code)}
_this.data('busy',0);_this.removeClass('running')})})})})(jQuery)